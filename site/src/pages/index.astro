---
import BaseLayout from '../layouts/BaseLayout.astro';
import config from '../../../novels.config.json';
import stats from '../data/novels-stats.json';

// Novel data - dynamically loaded from config and stats
const novels = config.novels.map(novel => {
  const novelStats = stats[novel.slug] || { chapters: 0, words: 0, wordsFormatted: '0' };
  return {
    ...novel,
    chapters: novelStats.chapters,
    words: novelStats.wordsFormatted
  };
});

const genres = config.genres;

const features = [
  {
    icon: 'ğŸ“–',
    title: 'æ²‰æµ¸å¼é–±è®€',
    description: 'ç²¾å¿ƒè¨­è¨ˆçš„é–±è®€ä»‹é¢ï¼Œè®“æ‚¨å°ˆæ³¨æ–¼æ•…äº‹æœ¬èº«',
  },
  {
    icon: 'ğŸ¯',
    title: 'ç¡¬æ´¾å¯«å¯¦',
    description: 'æ³¨é‡è€ƒæ“šèˆ‡ç´°ç¯€ï¼Œæ‰“é€ èº«æ­·å…¶å¢ƒçš„é–±è®€é«”é©—',
  },
  {
    icon: 'ğŸŒ',
    title: 'å¤šç·šæ•˜äº‹',
    description: 'å¤šè§’è‰²è¦–è§’äº¤ç¹”ï¼Œå‘ˆç¾æ•…äº‹çš„ä¸åŒé¢å‘',
  },
];
---

<BaseLayout title="Novels365 - åŸå‰µå°èªªå¹³å°">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <span class="hero-badge">åŸå‰µå°èªªå¹³å°</span>
        <h1>{config.site.name}</h1>
        <p class="tagline">{config.site.tagline}</p>
        <p class="subtitle">{config.site.subtitle}</p>
        <p class="description">
          é€™è£¡æ²’æœ‰ç„¡æ•µè‹±é›„ï¼Œåªæœ‰åœ¨æ¥µé™ç’°å¢ƒä¸‹æ™æ‰æ±‚ç”Ÿçš„æ™®é€šäººã€‚<br/>
          æˆ‘å€‘ç”¨æ–‡å­—æ§‹å»ºä¸–ç•Œï¼Œç”¨æ•…äº‹æ¢ç´¢äººæ€§ã€‚
        </p>
        <div class="hero-buttons">
          <a href="/novel/BlindOrbit" class="btn btn-primary">
            é–‹å§‹é–±è®€
            <span>â†’</span>
          </a>
          <a href="#novels" class="btn btn-outline">
            æ¢ç´¢æ‰€æœ‰ä½œå“
          </a>
        </div>
      </div>
      <div class="hero-visual">
        <div class="hero-graphic">
          <div class="hero-circles">
            <div class="circle circle-1"></div>
            <div class="circle circle-2"></div>
            <div class="circle circle-3"></div>
          </div>
          <div class="hero-center-icon">ğŸ“š</div>
        </div>
      </div>
    </div>
    <div class="scroll-indicator">å‘ä¸‹æ»¾å‹•</div>
  </section>

  <!-- Novels Section -->
  <section id="novels" class="section">
    <div class="container-wide">
      <div class="section-header">
        <h2>ä½œå“åˆ—è¡¨</h2>
        <p>æ¢ç´¢æˆ‘å€‘çš„åŸå‰µå°èªª</p>
      </div>

      <!-- Genre Tabs -->
      <div class="genre-tabs">
        {genres.map((genre, index) => (
          <button class={`genre-tab ${index === 0 ? 'active' : ''}`}>
            {genre}
          </button>
        ))}
      </div>

      <!-- Novel Grid -->
      <div class="novel-grid">
        {novels.map((novel) => (
          <article class="novel-card">
            {novel.coverUrl && (
              <div class="novel-card-cover">
                <img src={novel.coverUrl} alt={novel.title} />
              </div>
            )}
            <div class="novel-card-content">
              <div class="novel-card-header">
                <span class="novel-card-genre">{novel.genre}</span>
                <h3>{novel.title}</h3>
                {novel.titleEn && <p class="novel-card-title-en">{novel.titleEn}</p>}
                <div class="novel-card-meta">
                  <span class={`status-badge ${novel.status}`}>
                    <span class="status-dot"></span>
                    {novel.statusText}
                  </span>
                  <span>{novel.chapters} ç« </span>
                  <span>{novel.words} å­—</span>
                </div>
              </div>
              <div class="novel-card-body">
                <p class="novel-card-description">{novel.description}</p>
                <div class="novel-card-tags">
                  {novel.tags.map((tag) => (
                    <span class="tag">{tag}</span>
                  ))}
                </div>
              </div>
              <div class="novel-card-footer">
                <a href={`/novel/${novel.slug}`} class="novel-card-link">
                  <span>é–‹å§‹é–±è®€</span>
                  <span>â†’</span>
                </a>
              </div>
            </div>
          </article>
        ))}

        <!-- Coming Soon Card -->
        <article class="novel-card" style="opacity: 0.6;">
          <div class="novel-card-header">
            <span class="novel-card-genre">æ•¬è«‹æœŸå¾…</span>
            <h3>æ›´å¤šä½œå“ç±Œå‚™ä¸­...</h3>
            <div class="novel-card-meta">
              <span class="status-badge">å³å°‡æ¨å‡º</span>
            </div>
          </div>
          <div class="novel-card-body">
            <p class="novel-card-description">
              æˆ‘å€‘æ­£åœ¨åŠªåŠ›å‰µä½œæ›´å¤šç²¾å½©çš„æ•…äº‹ã€‚æ•¬è«‹æœŸå¾…æ–°ä½œå“çš„ç™¼å¸ƒï¼
            </p>
          </div>
          <div class="novel-card-footer">
            <span class="novel-card-link" style="cursor: default; opacity: 0.5;">
              <span>å³å°‡æ¨å‡º</span>
            </span>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="section" style="background: var(--color-bg-secondary);">
    <div class="container-wide">
      <div class="section-header">
        <h2>ç‚ºä»€éº¼é¸æ“‡æˆ‘å€‘</h2>
        <p>å°ˆæ³¨æ–¼é–±è®€é«”é©—çš„åŸå‰µå°èªªå¹³å°</p>
      </div>

      <div class="features-grid">
        {features.map((feature) => (
          <div class="feature-card">
            <div class="feature-icon">{feature.icon}</div>
            <h3>{feature.title}</h3>
            <p>{feature.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
